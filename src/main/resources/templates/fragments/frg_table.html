<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<body>
<div th:fragment="todo_list" class="table-responsive">
    <table class="table table-striped table-dark table-hover table-bordered"
           style="font-size: 13px; width: 100%; height: 100%">
        <thead class="bg-secondary"
               style="position:relative; top: 0px; width: 100%">
        <tr>
            <th class="text-center" scope="col">ID</th>
            <th>TITLE</th>
            <th>OWNER</th>
            <th>PROJECT</th>
            <th>CONTEXT</th>
            <th>DUE DATE</th>
            <th>PRIORITY</th>
            <th>STATUS</th>
            <th></th>
            <th></th>
        </tr>
        </thead>
        <tr th:each="todo : ${todos}">
            <td class="text-center my-0 my-sm0"
                th:style="'padding: 4px; width: 5%; ' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getId()}"/>
            <td th:style="'padding: 4px; width: 30%'">
                <a th:style="${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: cornflowerblue'"
                   th:href="@{|/todo/${todo.getId()}/edit|}"
                   th:text="${todo.getTitle()}"
                   th:title="${todo.getDescription()}">
                </a>
                <a th:if="${todo.hasLink()} == true" target="_blank"
                   th:style="${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: cornflowerblue' + '; letter-spacing: -2px'"
                   th:href="@{${todo.getLink()}}">>>>
                </a>
            </td>
            <td th:style="'padding: 4px; width: 7%; ' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' :
             (${todo.getOwner().getId()} == 2 ? 'color:#A6F8DD' : 'color: white'))"
                th:text="${todo.getOwner().getName()}"/>
            <td th:style="'padding: 4px; width: 10%; ' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getProject()}"/>
            <td th:style="'padding: 4px;  width: 7%; ' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getContext()}"/>
            <td class="text-center" th:style="'padding: 4px;  width: 10%; ' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getDisplayDueDate()}"/>
            <td th:style="'padding: 4px; width: 7%; '+
                (${todo.getStatus().ordinal()} == 4 ? 'color: gray;' :
                (${todo.getPrio().ordinal()} == 0 ? 'color: red' :
                (${todo.getPrio().ordinal()} == 1 ? 'color: orange' :
                (${todo.getPrio().ordinal()} == 2 ? 'color: yellow' :
                (${todo.getPrio().ordinal()} == 3 ? 'color: lime' : 'color: gray')))))"
                th:text="${todo.getPrio()}"/>
            <td th:style="'padding: 4px; width: 8%; ' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getStatus()}"/>
            <td class="text-center my-0 my-sm0" style="padding: 1px 4px; width: 8%">

                <input style="font-size: 13px" th:disabled="${todo.getStatus().ordinal()} == 4"
                       class="btn btn-outline-success my-0 my-sm0 d-flex justify-content-center btn-sm btn-block"
                       type="button"
                       th:onclick="'completeTodo('+${todo.getId()}+')'"
                       value="Done">

            </td>
            <td class="text-center my-0 my-sm0" style="padding: 1px 4px; width: 8%">
                <input style="font-size: 13px"
                       class="btn btn-outline-danger my-0 my-sm0 d-flex justify-content-center btn-sm btn-block"
                       data-toggle="modal"
                       data-target="#myModal"
                       th:data-id="${todo.getId()}"
                       type="button"
                       value="Delete">
            </td>
        </tr>
    </table>
    <div th:insert="fragments/frg_confirm_dialog :: delete_todo_dialog"></div>
</div>
</body>
</html>