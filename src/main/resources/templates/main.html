<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MyTasks</title>
    <!--<link rel="stylesheet" type="text/css" href="/style.css">-->
    <link href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"/>
</head>

<body style="background: #343a40!important">
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <a class="navbar navbar-brand active" style="color: lightgray;"><h3>Todos ...</h3></a>

    <div class="collapse navbar-collapse" style="display: flex; justify-content: flex-end">
        <ul class="nav navbar-nav d-block">
            <li class="nav-item">
                <a class="btn-link" th:href="@{/settings}" th:text="settings"/>
            </li>
            <li class="nav-item d-block">
                <a style="font-size: 13px" class="btn btn-outline-warning my-0 my-sm0 d-flex btn-sm"
                   th:href="@{|/todo/add|}">Add new task</a>
            </li>
        </ul>
    </div>
</nav>


<div class="table-responsive">
    <table style="font-size: 13px" class="table table-striped table-dark table-hover table-bordered">
        <thead class="bg-secondary">
        <tr>
            <th class="text-center" scope="col">ID</th>
            <th>TITLE</th>
            <th>OWNER</th>
            <th>PROJECT</th>
            <th>CONTEXT</th>
            <th>DUE DATE</th>
            <th>PRIORITY</th>
            <th>STATUS</th>
            <th></th>
            <th></th>
        </tr>
        </thead>
        <tr th:each="todo : ${todos}">
            <td class="text-center my-0 my-sm0"
                th:style="'padding: 4px;' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getId()}"/>
            <td th:style="'padding: 4px'">
                <a th:style="${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: cornflowerblue'"
                   th:href="@{|/todo/${todo.getId()}/edit|}"
                   th:text="${todo.getTitle()}"
                   th:title="${todo.getDescription()}">
                </a>
            </td>
            <td th:style="'padding: 4px;' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' :
             (${todo.getOwner().getId()} == 2 ? 'color:#A6F8DD' : 'color: white'))"
                th:text="${todo.getOwner().getName()}"/>
            <td th:style="'padding: 4px;' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getProject()}"/>
            <td th:style="'padding: 4px;' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getContext()}"/>
            <td th:style="'padding: 4px;' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getDisplayDueDate()} "/>
            <td th:style="'padding: 4px;' +
                (${todo.getStatus().ordinal()} == 4 ? 'color: gray;' :
                (${todo.getPrio().ordinal()} == 0 ? 'color: red' :
                (${todo.getPrio().ordinal()} == 1 ? 'color: orange' :
                (${todo.getPrio().ordinal()} == 2 ? 'color: yellow' :
                (${todo.getPrio().ordinal()} == 3 ? 'color: lime' : 'color: gray')))))"
                th:text="${todo.getPrio()}"/>
            <td th:style="'padding: 4px;' + (${todo.getStatus().ordinal()} == 4 ? 'color: gray' : 'color: white')"
                th:text="${todo.getStatus()}"/>
            <td class="text-center my-0 my-sm0" style="padding: 1px 4px">
                <form action="#" th:action="@{|/todo/${todo.getId()}/done|}" th:method="post">
                    <input style="font-size: 13px" th:disabled="${todo.getStatus().ordinal()} == 4"
                           class="btn btn-outline-success my-0 my-sm0 d-flex justify-content-center btn-sm btn-block"
                           type="submit"
                           value="Done">
                </form>
            </td>
            <td class="text-center my-0 my-sm0" style="padding: 1px 4px">
                <form action="#" th:action="@{|/todo/${todo.getId()}/delete|}" th:method="delete">
                    <input style="font-size: 13px"
                           class="btn btn-outline-danger my-0 my-sm0 d-flex justify-content-center btn-sm btn-block"
                           type="submit"
                           value="Delete">
                </form>
            </td>
        </tr>
    </table>
</div>
</body>
<script src="/webjars/jquery/3.3.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.3.1/js/bootstrap.bundle.js"></script>
</body>
</html>